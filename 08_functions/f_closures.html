<!--
SPDX-License-Identifier: GPL-3.0-or-later
Copyright (C) 2025 Manuel Regamey
This file is part of SluInk. See the LICENSE file or <https://www.gnu.org/licenses/>.
-->

<!DOCTYPE html>
<html lang="fr"  data-theme="">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini-JS  f_Closures</title>
        <meta name="description" content="Une closure est une fonction
qui se souvient du contexte dans lequel elle a été créée. Elle permet de
conserver l’accès aux variables environnantes même après la fin de leur
exécution." />
  <!-- Boot-script: applique le thème choisi avant de charger la CSS -->
  <script>
    (function () {
      var key = 'SluInk-theme';
      try {
        var saved = localStorage.getItem(key);
        var t = (saved === 'light' || saved === 'dark')
          ? saved
          : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        document.documentElement.dataset.theme = t;
        document.documentElement.style.colorScheme = t; // scrollbars/UI natifs
      } catch (e) { }
    })();
  </script>

    <link rel="stylesheet" href="../assets/style.css" />
  
    <style type="text/css">
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
    
    <script src="../assets/script.js" defer></script>
  </head>

<body>

  <header class="site">
    <div class="brand">
      <a href="../index.html">
        Mini-JS
      </a>
    </div>

    <nav class="topnav">
            <a class="nav-prev" href="e_fonctionsflechees.html">e_FonctionsFlechees</a>
            <a class="nav-home" href="../index.html">Accueil</a>
            <a class="nav-next" href="g_recursives.html">g_Recursives</a>
          </nav>

    <div class="theme-buttons" role="group" aria-label="Thème" style="display:flex; gap:.5rem;">
      <button class="button icon-btn" data-theme-set="light" aria-label="Clair" title="Clair">
        <img src="../assets/sun-regular-full.svg" alt="sun" width="20" height="20" />
      </button>
      <button class="button icon-btn" data-theme-set="dark" aria-label="Sombre" title="Sombre">
        <img src="../assets/moon-regular-full.svg" alt="moon" width="20" height="20" />
      </button>
      <button class="button icon-btn" data-theme-set="academic" aria-label="Academic" title="Academic">
        <img src="../assets/file-regular-full.svg" alt="file" width="20" height="20" />
      </button>
    </div>


  </header>

  <div class="layout">
    <aside class="sidebar">
            <nav aria-label="Sommaire">
        <ul>
        <li><a href="#les-closures" id="toc-les-closures">Les
        Closures</a>
        <ul>
        <li><a href="#exemple-simple" id="toc-exemple-simple">Exemple
        simple</a></li>
        <li><a href="#pourquoi-est-ce-utile"
        id="toc-pourquoi-est-ce-utile">Pourquoi est-ce utile ?</a></li>
        <li><a href="#exemple-fonction-personnalisée"
        id="toc-exemple-fonction-personnalisée">Exemple : fonction
        personnalisée</a></li>
        <li><a href="#exemple-variables-privées"
        id="toc-exemple-variables-privées">Exemple : variables
        privées</a></li>
        <li><a href="#à-retenir" id="toc-à-retenir">À retenir</a></li>
        </ul></li>
        </ul>
      </nav>
          </aside>

    <main class="content" id="content">
      <h1 class="title">Mini-JS f_Closures</h1>
      
      
      
      <h1 id="les-closures">Les Closures</h1>
      <p>En JavaScript, une fonction ne vit pas isolée : elle conserve
      un lien avec l’environnement dans lequel elle a été créée. Cette
      propriété particulière s’appelle une <strong>closure</strong> (ou
      fermeture). Grâce à elle, une fonction peut se souvenir des
      variables de son contexte d’origine, même si ce contexte est
      terminé.</p>
      <h2 id="exemple-simple">Exemple simple</h2>
      <p>Prenons une fonction qui renvoie une autre fonction :</p>
      <div class="sourceCode" id="cb1"><pre
      class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">creerCompteur</span>() {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> compteur <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">function</span>() {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    compteur<span class="op">++;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> compteur<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> incrementer <span class="op">=</span> <span class="fu">creerCompteur</span>()<span class="op">;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">incrementer</span>())<span class="op">;</span> <span class="co">// 1</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">incrementer</span>())<span class="op">;</span> <span class="co">// 2</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">incrementer</span>())<span class="op">;</span> <span class="co">// 3</span></span></code></pre></div>
      <p>Ici, la variable <code>compteur</code> appartient normalement à
      la fonction <code>creerCompteur</code>. Pourtant, la fonction
      renvoyée continue d’y avoir accès, même après la fin de
      <code>creerCompteur</code>. C’est l’essence même d’une
      closure.</p>
      <h2 id="pourquoi-est-ce-utile">Pourquoi est-ce utile ?</h2>
      <p>Les closures permettent de créer des fonctions
      <strong>personnalisées</strong> et <strong>persistantes</strong>.
      Elles sont largement utilisées pour :</p>
      <ul>
      <li><strong>Protéger des variables internes</strong> : les
      variables d’une closure ne sont pas accessibles directement de
      l’extérieur, ce qui crée une sorte d’« encapsulation ».</li>
      <li><strong>Créer des fonctions configurées</strong> : une closure
      peut retenir une valeur et construire une fonction
      spécialisée.</li>
      <li><strong>Gérer l’état dans un environnement
      fonctionnel</strong> : elles offrent un moyen élégant de mémoriser
      des données sans utiliser d’objets complexes.</li>
      </ul>
      <h2 id="exemple-fonction-personnalisée">Exemple : fonction
      personnalisée</h2>
      <p>Imaginons une fonction qui fabrique des multiplicateurs :</p>
      <div class="sourceCode" id="cb2"><pre
      class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">fabriquerMultiplicateur</span>(x) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">function</span>(y) {</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> y<span class="op">;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> doubler <span class="op">=</span> <span class="fu">fabriquerMultiplicateur</span>(<span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> tripler <span class="op">=</span> <span class="fu">fabriquerMultiplicateur</span>(<span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">doubler</span>(<span class="dv">5</span>))<span class="op">;</span> <span class="co">// 10</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="fu">tripler</span>(<span class="dv">5</span>))<span class="op">;</span> <span class="co">// 15</span></span></code></pre></div>
      <p>Chaque fonction produite garde en mémoire la valeur de
      <code>x</code> définie lors de sa création.</p>
      <h2 id="exemple-variables-privées">Exemple : variables
      privées</h2>
      <p>Les closures sont aussi utiles pour simuler des
      <strong>variables privées</strong> en JavaScript :</p>
      <div class="sourceCode" id="cb3"><pre
      class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">creerBanque</span>() {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> solde <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">deposer</span><span class="op">:</span> <span class="kw">function</span>(montant) {</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>      solde <span class="op">+=</span> montant<span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> solde<span class="op">;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">retirer</span><span class="op">:</span> <span class="kw">function</span>(montant) {</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>      solde <span class="op">-=</span> montant<span class="op">;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> solde<span class="op">;</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">consulter</span><span class="op">:</span> <span class="kw">function</span>() {</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> solde<span class="op">;</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> monCompte <span class="op">=</span> <span class="fu">creerBanque</span>()<span class="op">;</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(monCompte<span class="op">.</span><span class="fu">deposer</span>(<span class="dv">100</span>))<span class="op">;</span> <span class="co">// 100</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(monCompte<span class="op">.</span><span class="fu">retirer</span>(<span class="dv">30</span>))<span class="op">;</span>  <span class="co">// 70</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(monCompte<span class="op">.</span><span class="fu">consulter</span>())<span class="op">;</span>  <span class="co">// 70</span></span></code></pre></div>
      <p>Ici, la variable <code>solde</code> n’est pas accessible
      directement. Seules les fonctions internes y ont accès, ce qui
      garantit une meilleure sécurité des données.</p>
      <hr />
      <h2 id="à-retenir">À retenir</h2>
      <p>Une <strong>closure</strong> est une fonction qui conserve
      l’accès à son environnement de création. Elle permet de créer des
      fonctions spécialisées, de gérer un état persistant et de protéger
      des variables internes. Les closures sont une des notions les plus
      puissantes et subtiles du langage JavaScript : elles combinent la
      souplesse des fonctions avec la mémoire d’un contexte.</p>
      <hr />
      <p>⬅️ <a href="./e_fonctionsflechees.html">Chapitre précédent :
      Les Fonctions fléchées</a></p>
      <p>➡️ <a href="./g_recursives.html">Chapitre suivant : Les
      Fonctions récursives</a></p>
    </main>
  </div>

  <footer class="site">
    © Manuel Regamey 2025 Mini-JS Généré avec [SluInk]
  </footer>

  </body>

</html>
